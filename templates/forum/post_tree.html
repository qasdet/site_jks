{% macro render_post(post, level=0) %}
<div class="post" id="post-{{ post.id }}" style="margin-left: {{ level * 30 }}px;">
    {% if level > 0 %}
        <div class="reply-indicator">
            <span>‚Ü≥</span> –û—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
        </div>
    {% endif %}
    <div class="post-header">
        <div class="post-author">{{ post.user.username }}</div>
        <div class="post-date">{{ post.created_at.strftime('%d.%m.%Y %H:%M') }}</div>
    </div>
    <div class="post-content">{{ post.content }}</div>
    <div class="post-actions">
        {% if current_user.is_authenticated %}
            <a href="{{ url_for('forum.reply_to_post', post_id=post.id) }}" class="reply-btn">
                <span>üí¨</span>–û—Ç–≤–µ—Ç–∏—Ç—å
            </a>
        {% endif %}
        {% if current_user.is_authenticated and post.user_id == current_user.id %}
            <a href="{{ url_for('forum.edit_post', post_id=post.id) }}" class="edit-btn">
                <span>‚úèÔ∏è</span>–ò–∑–º–µ–Ω–∏—Ç—å
            </a>
            <a href="#" onclick="deletePost({{ post.id }})" class="delete-btn">
                <span>üóëÔ∏è</span>–£–¥–∞–ª–∏—Ç—å
            </a>
        {% endif %}
    </div>
    
    {% if post.replies %}
        <div class="replies">
            {% for reply in post.replies %}
                {{ render_post(reply, level + 1) }}
            {% endfor %}
        </div>
    {% endif %}
</div>
{% endmacro %}

{{ render_post(post) }} 